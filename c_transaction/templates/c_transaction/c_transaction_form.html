{% extends "user/layout.html" %}
{% load static %}
{% load crispy_forms_field %}
{% block extra_css %}
    <!-- Animation Css -->
    <link href="{% static 'plugins/animate-css/animate.css'%}" rel="stylesheet" />
 <!-- Bootstrap Select Css -->
    <link href="{% static 'plugins/bootstrap-select/css/bootstrap-select.css'%}" rel="stylesheet" />

    <!-- Sweet Alert Css -->
    <link href="{% static 'plugins/sweetalert/sweetalert.css'%}" rel="stylesheet" />

      <!-- Bootstrap Material Datetime Picker Css -->
    <link href="{% static 'plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css'%}" rel="stylesheet" />

    <!-- Bootstrap DatePicker Css -->
    <link href="{% static 'plugins/bootstrap-datepicker/css/bootstrap-datepicker.css'%}" rel="stylesheet" />


{% endblock %}
{% block body %}
{#    <div class="block-header">#}
{#                <h2>#}
{#                    FORM VALIDATION#}
{#                    <small>Taken from <a href="https://jqueryvalidation.org/" target="_blank">jqueryvalidation.org</a></small>#}
{#                </h2>#}
{#            </div>#}
            <!-- Basic Validation -->
                        <div class="row clearfix">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card">
                        <div class="header">
                            <center><h2>Creditor transaction Entry Form</h2></center>
                            <ul class="header-dropdown m-r--5">
                                <li class="dropdown">
                                    <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                        <i class="material-icons">more_vert</i>
                                    </a>
                                    <ul class="dropdown-menu pull-right">
                                        <li><a href="javascript:void(0);">Action</a></li>
                                        <li><a href="javascript:void(0);">Another action</a></li>
                                        <li><a href="javascript:void(0);">Something else here</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="body">
                            <form id="form_validation" method="POST">
                                {% csrf_token %}
                                <div class="form-group form-float">
                                        <label class="form-label">Date </label>
                                    <div class="form-line">
                                        {% crispy_field form.date 'class' 'datepicker' %}
                                         {% if form.date.errors %}
                                            {% for error in form.date.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            <div class="row clearfix">
                            <div class="col-sm-6">
                                <div class="form-group form-float">
                                <label class="form-label">Vehicle Id</label>
                                    <div class="form-line">
                                        {% crispy_field form.vehicle_id %}

                                         {% if form.vehicle_id.errors %}
                                            {% for error in form.vehicle_id.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                            <div class="form-group form-float">
                                <label class="form-label">nozzel</label>
                                    <div class="form-line">
                                        {% crispy_field form.nozzel %}

                                        {% if form.nozzel.errors %}
                                            {% for error in form.nozzel.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-float">
                                <label class="form-label">Driver Name</label>
                                    <div class="form-line">
                                        {% crispy_field form.drivername %}

                                         {% if form.drivername.errors %}
                                            {% for error in form.drivername.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="form-group form-float">
                                <label class="form-label">Company Name</label>
                                    <div class="form-line">
                                        {% crispy_field form.companyname %}

                                         {% if form.companyname.errors %}
                                            {% for error in form.companyname.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4" id="petrolinlit">
                                <div class="form-group form-float">
                                        <label class="form-label">petrol in litre</label>
                                    <div class="form-line">
                                        {% crispy_field form.petrolinlit %}
                                        {% if form.petrolinlit.errors %}
                                            {% for error in form.petrolinlit.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4" id="petrolrates">
                                <div class="form-group form-float">
                                        <label class="form-label">petrol rates</label>
                                    <div class="form-line">
                                        {% crispy_field form.petrolrates %}
                                        {% if form.petrorates.errors %}
                                            {% for error in form.petrolrates.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4" id="petrolprice">
                                <div class="form-group form-float">
                                        <label class="form-label">petrolprice</label>
                                    <div class="form-line">
                                        {% crispy_field form.petrolprice %}
                                        {% if form.petrolprice.errors %}
                                            {% for error in form.petrolprice.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4" id="dieselinlit">
                                <div class="form-group form-float">
                                        <label class="form-label">Diesel In Liters</label>
                                    <div class="form-line">
                                        {% crispy_field form.dieselinlit %}
                                        {% if form.dieselinlit.errors %}
                                            {% for error in form.dieselinlit.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4" id="dieselrates">
                                <div class="form-group form-float">
                                        <label class="form-label">Diesel Rates</label>
                                    <div class="form-line">
                                        {% crispy_field form.dieselrates %}
                                        {% if form.dieselrates.errors %}
                                            {% for error in form.dieselrates.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-4" id="dieselprice">
                                <div class="form-group form-float">
                                         <label class="form-label">dieselprice</label>
                                   <div class="form-line">
                                        {% crispy_field form.dieselprice %}
                                        {% if form.dieselprice.errors %}
                                            {% for error in form.dieselprice.errors %}
                                                <div class="invalid-feedback">
                                                  {{ error }}
                                                </div>
                                            {% endfor %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                            </div>


                                <button class="btn btn-primary waves-effect" type="submit">SUBMIT</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- #END# Basic Validation -->
{% endblock %}
{% block extra_js %}

    <!-- Bootstrap Material Datetime Picker Plugin Js -->
    <script src="{%  static 'plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js'%}"></script>

    <!-- Bootstrap Datepicker Plugin Js -->
    <script src="{% static 'plugins/bootstrap-datepicker/js/bootstrap-datepicker.js'%}"></script>
     <!-- Bootstrap Material Datetime Picker Plugin Js -->
    <script src="{%  static 'plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js'%}"></script>
    <script>
         $('.datepicker').bootstrapMaterialDatePicker({
        format: 'YYYY-MM-DD',
        clearButton: true,
        weekStart: 1,
        time: false
    });

    </script>
    <script>
        document.addEventListener('DOMContentLoaded',function(){
         document.querySelector('#id_petrolinlit').onkeyup=function(){
             fetch("http://127.0.0.1:8000/rates/petrolprice/")
             .then(response => response.json())
             .then(data => {

                 console.log(data.petrol_price);
                 let lostpp=document.querySelector('#id_petrolprice');
                 lostpp.value=data.petrol_price*this.value;
             })
         }
        })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded',function(){
         document.querySelector('#id_petrolrates').onfocusin=function(){
             fetch("http://127.0.0.1:8000/rates/petrolprice/")
             .then(response => response.json())
             .then(data => {

                 console.log(data.petrol_price);
                 let lostpp=document.querySelector('#id_petrolrates');
                 lostpp.value=data.petrol_price;
             })
         }
        })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded',function(){
         document.querySelector('#id_dieselinlit').onkeyup=function(){
             fetch("http://127.0.0.1:8000/rates/dieselprice/")
             .then(response => response.json())
             .then(data => {

                 console.log(data.diesel_price);
                 let lostdp=document.querySelector('#id_dieselprice');
                 lostdp.value=data.diesel_price*this.value;
             })
         }
        })
    </script>
    <script>
        document.addEventListener('DOMContentLoaded',function(){
         document.querySelector('#id_dieselrates').onfocusin=function(){
             fetch("http://127.0.0.1:8000/rates/dieselprice/")
             .then(response => response.json())
             .then(data => {

                 console.log(data.diesel_price);
                 let lostdp=document.querySelector('#id_dieselrates');
                 lostdp.value=data.diesel_price;
             })
         }
        })
    </script>
    <script>

        // hide and show
        document.addEventListener('DOMContentLoaded',function(){
         document.querySelector('#id_nozzel').onchange=function(){
             fetch(`http://127.0.0.1:8000/nozzel/type/${this.value}`)
             .then(response => response.json())
             .then(data => {
                    let type=data.type.toLowerCase();
                    if(type=='petrol')
                    {

                        document.querySelector("#petrolinlit").style.display='block';
                        document.querySelector("#petrolprice").style.display='block';
                        document.querySelector("#petrolrates").style.display='block';
                        document.querySelector("#dieselinlit").style.display='none';
                        document.querySelector("#dieselprice").style.display='none';
                        document.querySelector("#dieselrates").style.display='none';
                    }
                    else if (type == 'diesel')
                    {
                        document.querySelector("#petrolprice").style.display='none';
                        document.querySelector("#petrolinlit").style.display='none';
                        document.querySelector("#petrolrates").style.display='none';
                        document.querySelector("#dieselinlit").style.display='block';
                        document.querySelector("#dieselprice").style.display='block';
                        document.querySelector("#dieselrates").style.display='block';

                    }

             })
         }

         //get total petrol


        })
    </script>


{% endblock %}